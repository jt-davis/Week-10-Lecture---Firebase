<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
		<link rel="stylesheet" href="styles.css" />
	</head>
	<body>
		<h1>Restaurants in Hays</h1>
		<div class="content">
			<form id="add-restaurant-form"></form>
			<ul id="restaurant-list"></ul>
		</div>
		<script type="module">
			// Import the functions you need from the SDKs you need
			import { initializeApp } from "https://www.gstatic.com/firebasejs/9.2.0/firebase-app.js";
			import {
				getFirestore,
				collection,
				getDocs,
				addDoc,
				doc,
				deleteDoc,
				query,
				where,
				updateDoc,
			} from "https://www.gstatic.com/firebasejs/9.2.0/firebase-firestore.js";
			// TODO: Add SDKs for Firebase products that you want to use
			// https://firebase.google.com/docs/web/setup#available-libraries

			// Your web app's Firebase configuration
			// For Firebase JS SDK v7.20.0 and later, measurementId is optional
			const firebaseConfig = {
				apiKey: "AIzaSyDb8d5N93aV0DYyn65Fm82gfYFzUVrX6ck",
				authDomain: "restaurants-298e4.firebaseapp.com",
				projectId: "restaurants-298e4",
				storageBucket: "restaurants-298e4.appspot.com",
				messagingSenderId: "62987988227",
				appId: "1:62987988227:web:ec67dbfe065dae39ffcd36",
				measurementId: "G-086K3EHY9G",
			};

			// Initialize Firebase
			const app = initializeApp(firebaseConfig);
			const db = getFirestore(app);
			async function getRestaurants(db) {
				const restaurantsCol = collection(db, "Restaurants");
				const restaurantsSnapshot = await getDocs(restaurantsCol);
				const restaurantsList = restaurantsSnapshot.docs.map((doc) =>
					doc.data()
				);
				return restaurantsList;
			}

			const restaurantsList = document.querySelector("#restaurant-list");

			function renderRestaurant(doc) {
				let li = document.createElement("li");
				let name = document.createElement("span");
				let city = document.createElement("span");

				li.setAttribute("data-id", doc.id);
				name.textContent = doc.name;
				city.textContent = doc.city;

				li.appendChild(name);
				li.appendChild(city);
				console.log(doc.id);
				restaurantsList.appendChild(li);
			}

			const restaurants = getRestaurants(db).then((snapshot) => {
				snapshot.forEach((doc) => {
					renderRestaurant(doc);
				});
			});
		</script>
		<script src="app.js"></script>
	</body>
</html>
